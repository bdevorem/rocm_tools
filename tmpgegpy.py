#p_x = m.add_parameter("x", migraphx.shape(type="float_type", lens=[$m$, $k1$]))
#x_1 = m.add_literal(migraphx.generate_argument(migraphx.shape(type="float_type", lens=[$k1$, $n1k2$]), 4))
#x_2 = m.add_literal(migraphx.generate_argument(migraphx.shape(type="float_type", lens=[$n1k2$, $n2$]), 0))
#x_3 = m.add_instruction(migraphx.op("dot"), [p_x, x_1]) # migraphx.shape(type="float_type", lens=[$m$, $n1k2$])
#m.add_instruction(migraphx.op("dot"), [x_3, x_2]) # migraphx.shape(type="float_type", lens=[$m$, $n2$])
data = """
first gemm lhs: 168, 20
first gemm rhs: 20, 20
final gemm lhs: 168, 20
final gemm rhs: 20, 1776
first gemm lhs: 168, 20
first gemm rhs: 20, 20
final gemm lhs: 168, 20
final gemm rhs: 20, 1776
first gemm lhs: 168, 20
first gemm rhs: 20, 20
final gemm lhs: 168, 20
final gemm rhs: 20, 1776
first gemm lhs: 168, 1000
first gemm rhs: 1000, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 1000
first gemm lhs: 168, 128
first gemm rhs: 128, 1000
final gemm lhs: 168, 1000
final gemm rhs: 1000, 1776
first gemm lhs: 168, 1000
first gemm rhs: 1000, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 1000
first gemm lhs: 168, 128
first gemm rhs: 128, 1000
final gemm lhs: 168, 1000
final gemm rhs: 1000, 1776
first gemm lhs: 168, 100
first gemm rhs: 100, 100
final gemm lhs: 168, 100
final gemm rhs: 100, 1776
first gemm lhs: 168, 100
first gemm rhs: 100, 100
final gemm lhs: 168, 100
final gemm rhs: 100, 1776
first gemm lhs: 168, 100
first gemm rhs: 100, 100
final gemm lhs: 168, 100
final gemm rhs: 100, 1776
first gemm lhs: 168, 200
first gemm rhs: 200, 200
final gemm lhs: 168, 200
final gemm rhs: 200, 1776
first gemm lhs: 168, 20
first gemm rhs: 20, 20
final gemm lhs: 168, 20
final gemm rhs: 20, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 70
first gemm rhs: 70, 70
final gemm lhs: 168, 70
final gemm rhs: 70, 1776
first gemm lhs: 168, 70
first gemm rhs: 70, 70
final gemm lhs: 168, 70
final gemm rhs: 70, 1776
first gemm lhs: 168, 160
first gemm rhs: 160, 160
final gemm lhs: 168, 160
final gemm rhs: 160, 1776
first gemm lhs: 168, 100
first gemm rhs: 100, 100
final gemm lhs: 168, 100
final gemm rhs: 100, 1776
first gemm lhs: 168, 100
first gemm rhs: 100, 100
final gemm lhs: 168, 100
final gemm rhs: 100, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 1
first gemm rhs: 1, 1
final gemm lhs: 168, 1
final gemm rhs: 1, 1776
first gemm lhs: 168, 50
first gemm rhs: 50, 50
final gemm lhs: 168, 50
final gemm rhs: 50, 1776
first gemm lhs: 168, 70
first gemm rhs: 70, 70
final gemm lhs: 168, 70
final gemm rhs: 70, 1776
first gemm lhs: 168, 1
first gemm rhs: 1, 1
final gemm lhs: 168, 1
final gemm rhs: 1, 1776
first gemm lhs: 168, 1
first gemm rhs: 1, 1
final gemm lhs: 168, 1
final gemm rhs: 1, 1776
first gemm lhs: 168, 368
first gemm rhs: 368, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 368
first gemm lhs: 168, 128
first gemm rhs: 128, 368
final gemm lhs: 168, 368
final gemm rhs: 368, 1776
first gemm lhs: 168, 296
first gemm rhs: 296, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 296
first gemm lhs: 168, 128
first gemm rhs: 128, 296
final gemm lhs: 168, 296
final gemm rhs: 296, 1776
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 128
first gemm rhs: 128, 360
final gemm lhs: 168, 360
final gemm rhs: 360, 1776
first gemm lhs: 168, 328
first gemm rhs: 328, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 328
first gemm lhs: 168, 128
first gemm rhs: 128, 328
final gemm lhs: 168, 328
final gemm rhs: 328, 1776
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 128
first gemm rhs: 128, 360
final gemm lhs: 168, 360
final gemm rhs: 360, 1776
first gemm lhs: 168, 368
first gemm rhs: 368, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 368
first gemm lhs: 168, 128
first gemm rhs: 128, 368
final gemm lhs: 168, 368
final gemm rhs: 368, 1776
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 128
first gemm rhs: 128, 360
final gemm lhs: 168, 360
final gemm rhs: 360, 1776
first gemm lhs: 168, 536
first gemm rhs: 536, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 536
first gemm lhs: 168, 128
first gemm rhs: 128, 536
final gemm lhs: 168, 536
final gemm rhs: 536, 1776
first gemm lhs: 168, 448
first gemm rhs: 448, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 448
first gemm lhs: 168, 128
first gemm rhs: 128, 448
final gemm lhs: 168, 448
final gemm rhs: 448, 1776
first gemm lhs: 168, 328
first gemm rhs: 328, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 328
first gemm lhs: 168, 128
first gemm rhs: 128, 328
final gemm lhs: 168, 328
final gemm rhs: 328, 1776
first gemm lhs: 168, 816
first gemm rhs: 816, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 816
first gemm lhs: 168, 128
first gemm rhs: 128, 816
final gemm lhs: 168, 816
final gemm rhs: 816, 1648
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 128
first gemm rhs: 128, 360
final gemm lhs: 168, 360
final gemm rhs: 360, 1776
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 128
first gemm rhs: 128, 360
final gemm lhs: 168, 360
final gemm rhs: 360, 1776
first gemm lhs: 168, 2960
first gemm rhs: 2960, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 2960
first gemm lhs: 168, 128
first gemm rhs: 128, 2960
final gemm lhs: 168, 2960
final gemm rhs: 2960, 1776
first gemm lhs: 168, 328
first gemm rhs: 328, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 328
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 360
first gemm rhs: 360, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 360
first gemm lhs: 168, 368
first gemm rhs: 368, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 368
first gemm lhs: 168, 448
first gemm rhs: 448, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 448
first gemm lhs: 168, 2120
first gemm rhs: 2120, 128
final gemm lhs: 168, 128
final gemm rhs: 128, 2120
first gemm lhs: 168, 128
first gemm rhs: 128, 2120
final gemm lhs: 168, 2120
final gemm rhs: 2120, 1776
first gemm lhs: 168, 128
first gemm rhs: 128, 1336
final gemm lhs: 168, 1336
final gemm rhs: 1336, 1104
first gemm lhs: 168, 128
first gemm rhs: 128, 976
final gemm lhs: 168, 976
final gemm rhs: 976, 664
first gemm lhs: 168, 976
first gemm rhs: 976, 664
final gemm lhs: 168, 664
final gemm rhs: 664, 88
""".strip().split("\n")

tests = []

for i in range(0, len(data), 4):
    tests.append(data[i:i + 4])

out = set()
for test in tests:
    m_1l, k1_1l = test[0].split(": ")[1].split(", ")
    k1_1r, n1k2_1r = test[1].split(": ", 1)[1].split(", ")
    m_2l, n1k2_2l = test[2].split(": ", 1)[1].split(", ")
    n1k2_2r, n2_2r = test[3].split(": ", 1)[1].split(", ")
    good = m_1l == m_2l and n1k2_1r == n1k2_2l and k1_1l == k1_1r
    if good:
        out.add(f'{m_1l} {k1_1l} {n1k2_1r} {n2_2r}')
    #m k1 n1k2 n2
for test in out:
    print(test)
